<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Arron&#39;s Lab</title>
  
  <link href="/lunstd/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-08-14T13:32:05.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>a dba&#39;s blog</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dataguard故障--MRP进程终止</title>
    <link href="http://yoursite.com/2017/08/14/datagurad-mrp/"/>
    <id>http://yoursite.com/2017/08/14/datagurad-mrp/</id>
    <published>2017-08-14T13:29:57.000Z</published>
    <updated>2017-08-14T13:32:05.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、现象"><a href="#一、现象" class="headerlink" title="一、现象"></a>一、现象</h2><p>昨天凌晨DG告警，MRP进程不存在：</p>
<pre><code>***** bsCentreon *****

Notification Type: PROBLEM

Service: check_dataguard_mrp
Host: db_dg_bs
Address: *.*.*.*
State: CRITICAL

Date/Time: Thu Jul 13 22:59:29 CST 2017

Additional Info:

CRITICAL!-DataGuards MRP0 process is crash, please check it!
</code></pre><a id="more"></a>    
<h2 id="二、故障诊断"><a href="#二、故障诊断" class="headerlink" title="二、故障诊断"></a>二、故障诊断</h2><h3 id="1-登上DG服务器查看MRP进程"><a href="#1-登上DG服务器查看MRP进程" class="headerlink" title="1. 登上DG服务器查看MRP进程:"></a>1. 登上DG服务器查看MRP进程:</h3><pre><code>ps -ef|grep mrp
</code></pre><p>或者</p>
<pre><code>select pid, process, status, sequence#, delay_mins, block#, blocks
  from v$managed_standby
 order by sequence#;
</code></pre><p>都没发现MRP进程的相关信息
　</p>
<h3 id="2-查看错误日志"><a href="#2-查看错误日志" class="headerlink" title="2. 查看错误日志"></a>2. 查看错误日志</h3><pre><code>$vi alter_xxx.log

Thu Jul 13 22:44:22 2017
File #42 added to control file as &apos;UNNAMED00042&apos; because
the parameter STANDBY_FILE_MANAGEMENT is set to MANUAL
The file should be manually created to continue.
MRP0: Background Media Recovery terminated with error 1274
Errors in file /data/app/oracle/diag/rdbms/masadbdgbs/masadb/trace/masadb_pr00_15599.trc:
ORA-01274: cannot add datafile &apos;+DATA01/masadb/datafile/ts_part_table4_1.dbf&apos; - file could not be created
Managed Standby Recovery not using Real Time Apply
Recovery interrupted!
Recovered data files to a consistent state at change 5706142969
Thu Jul 13 22:44:24 2017
MRP0: Background Media Recovery process shutdown (masadb)
</code></pre><p>发现在故障报出的时间点前，MRP进程确实shutdown了。</p>
<h3 id="3-故障分析"><a href="#3-故障分析" class="headerlink" title="3. 故障分析"></a>3. 故障分析</h3><ol>
<li>主库上新添加的数据文件<code>+DATA01/masadb/datafile/ts_part_table4_1.dbf</code>没有同步到DG备库上。</li>
<li><p>再往上看发现这样的字样：</p>
 <figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">File</span> <span class="string">#42</span> added <span class="keyword">to</span> control <span class="keyword">file</span> <span class="keyword">as</span> <span class="string">'UNNAMED00042'</span> because</div><div class="line">    the parameter STANDBY_FILE_MANAGEMENT <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> MANUAL</div><div class="line">    The <span class="keyword">file</span> should be manually created <span class="keyword">to</span> <span class="keyword">continue</span>.</div></pre></td></tr></table></figure>
<p> 42号文件由于参数<code>STANDBY_FILE_MANAGEMENT=MANUAL</code>的原因，没有被正确创建，命名为’UNNAMED00042’</p>
</li>
<li>查看相关视图：<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">SQL&gt; show parameter standby_file_management</div><div class="line"></div><div class="line">NAME                    <span class="built_in"> TYPE </span>    VALUE</div><div class="line">------------------------------------ ----------- ------------------------------</div><div class="line">standby_file_management          string     MANUAL</div><div class="line"></div><div class="line">SQL&gt; select file_name <span class="keyword">from</span> dba_data_files where <span class="attribute">file_id</span>=42;</div><div class="line"></div><div class="line"><span class="literal">no</span> rows selected</div><div class="line"></div><div class="line">SQL&gt; select name <span class="keyword">from</span> v<span class="variable">$datafile</span> where file#=42;</div><div class="line"></div><div class="line">NAME</div><div class="line">--------------------------------------------------------------------------------</div><div class="line">/data/app/oracle/product/11.2.0/db_1/dbs/UNNAMED00042</div></pre></td></tr></table></figure>
</li>
</ol>
<p>至此已经清楚故障的原因了：</p>
<ol>
<li>由于<code>standby_file_management=MANUAL</code>，导致主库新添加的数据文件，在传到从库时路径不一致不能自动创建，并命名为’UNNAMED00042’</li>
<li>由于新数据文件不存在，导致MRP在应用日志是出错而crash。</li>
<li>至于standby_file_management参数，是由于上次维护DG时，将手工设置为MANUAL，方便进行redo log文件的清理。而事后未调整回AUTO所致</li>
</ol>
<h3 id="4-处理方案"><a href="#4-处理方案" class="headerlink" title="4. 处理方案"></a>4. 处理方案</h3><pre><code># 注意，该命令执行必须要确保standby_file_management=MANUAL，否则会报错
SQL&gt; ALTER DATABASE CREATE DATAFILE &apos;/data/app/oracle/product/11.2.0/db_1/dbs/UNNAMED00042&apos; as &apos;/data/oradata/masadb/ts_part_table4_1.dbf&apos;;

SQL&gt; alter database recover managed standby database using current logfile disconnect from session;
</code></pre><p>观察日志输出，MRP进程启动，能够正确应用日志</p>
<p>别忘了把参数改回来</p>
<pre><code>ALTER SYSTEM SET standby_file_management=&apos;AUTO&apos;;
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、现象&quot;&gt;&lt;a href=&quot;#一、现象&quot; class=&quot;headerlink&quot; title=&quot;一、现象&quot;&gt;&lt;/a&gt;一、现象&lt;/h2&gt;&lt;p&gt;昨天凌晨DG告警，MRP进程不存在：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;***** bsCentreon *****

Notification Type: PROBLEM

Service: check_dataguard_mrp
Host: db_dg_bs
Address: *.*.*.*
State: CRITICAL

Date/Time: Thu Jul 13 22:59:29 CST 2017

Additional Info:

CRITICAL!-DataGuards MRP0 process is crash, please check it!
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
      <category term="dataguard" scheme="http://yoursite.com/tags/dataguard/"/>
    
  </entry>
  
  <entry>
    <title>远程机房Dataguard出现GAP问题处理</title>
    <link href="http://yoursite.com/2017/08/14/datagurad-gap/"/>
    <id>http://yoursite.com/2017/08/14/datagurad-gap/</id>
    <published>2017-08-14T13:00:05.000Z</published>
    <updated>2017-08-14T13:05:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>##故障现象<br>远程机房Dataguard告警系统报警出现GAP，登陆备库查看相关视图和日志</p>
<a id="more"></a>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 视图查询</span></div><div class="line">SQL&gt; select <span class="built_in">name</span>,value <span class="keyword">from</span> v$dataguard_stats;</div><div class="line"></div><div class="line">NAME                             VALUE</div><div class="line"><span class="comment">-------------------------------- ----------------------------------------------------------------</span></div><div class="line">transport lag                    +<span class="number">02</span> <span class="number">00</span>:<span class="number">34</span>:<span class="number">43</span></div><div class="line">apply lag                        +<span class="number">02</span> <span class="number">00</span>:<span class="number">34</span>:<span class="number">43</span></div><div class="line">apply finish <span class="built_in">time</span>                +<span class="number">00</span> <span class="number">00</span>:<span class="number">01</span>:<span class="number">28.220</span></div><div class="line">estimated startup <span class="built_in">time</span>           <span class="number">17</span></div><div class="line"></div><div class="line"><span class="comment">-- 日志查询</span></div><div class="line">Fri Jun <span class="number">03</span> <span class="number">12</span>:<span class="number">39</span>:<span class="number">10</span> <span class="number">2016</span></div><div class="line">WARN: ARC2: Terminating pid <span class="number">20229</span> hung <span class="keyword">on</span> an I/O operation</div><div class="line">krsv_proc_kill: Killing <span class="number">1</span> processes (Process <span class="keyword">by</span> index)</div><div class="line">Fri Jun <span class="number">03</span> <span class="number">12</span>:<span class="number">39</span>:<span class="number">10</span> <span class="number">2016</span></div><div class="line">WARN: ARCH: Terminating pid <span class="number">20229</span> hung <span class="keyword">on</span> an I/O operation</div><div class="line">WARN: ARCH: Terminating pid <span class="number">20233</span> hung <span class="keyword">on</span> an I/O operation</div><div class="line">krsv_proc_kill: Killing <span class="number">1</span> processes (Process <span class="keyword">by</span> index)</div><div class="line">Fri Jun <span class="number">03</span> <span class="number">12</span>:<span class="number">39</span>:<span class="number">15</span> <span class="number">2016</span></div><div class="line">FAL[client]: Failed <span class="keyword">to</span> request gap sequence</div><div class="line"> GAP - thread <span class="number">2</span> sequence <span class="number">1648</span><span class="number">-1662</span></div><div class="line"> DBID <span class="number">1666528406</span> branch <span class="number">867683567</span></div><div class="line">FAL[client]: All defined FAL servers have been attempted.</div><div class="line"><span class="comment">------------------------------------------------------------</span></div><div class="line">Check <span class="keyword">that</span> <span class="keyword">the</span> CONTROL_FILE_RECORD_KEEP_TIME initialization</div><div class="line">parameter <span class="keyword">is</span> defined <span class="keyword">to</span> a value <span class="keyword">that</span>`s sufficiently large</div><div class="line">enough <span class="keyword">to</span> maintain adequate <span class="built_in">log</span> switch information <span class="keyword">to</span> resolve</div><div class="line">archivelog gaps.</div><div class="line"><span class="comment">------------------------------------------------------------</span></div></pre></td></tr></table></figure>
<p>##原因分析<br>由于前两天在主库上多几张大表（包括CLOB）进行处理，转移到历史表中，产生了大量的归档日志（超过80G），而远程机房是通过2M专线与本地机房相连，大日志传输到备机需要时间超时，导致DG无法正常完成归档日志的接收，进而出现归档日志的GAP。<br><strong>解决gap的步骤：</strong></p>
<ol>
<li>在备库获得gap的详细信息</li>
<li>将需要的归档日志从主库拷贝到备库</li>
<li>备库将归档日志注册，然后应用。</li>
</ol>
<p>##处理方法</p>
<ul>
<li><p>停止归档日志对远程机房DG的传输</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">SQL&gt; alter<span class="built_in"> system </span><span class="builtin-name">set</span> <span class="attribute">log_archive_dest_state_3</span>=<span class="string">'defer'</span> <span class="attribute">sid</span>=<span class="string">'*'</span>;</div><div class="line">SQL&gt; show parameter log_archive_dest_state_3;</div><div class="line"></div><div class="line">NAME                                <span class="built_in"> TYPE </span>       VALUE</div><div class="line">------------------------------------ ----------- ------------------------------</div><div class="line">log_archive_dest_state_3             string      defer</div></pre></td></tr></table></figure>
</li>
<li><p>查询备库缺失的归档日志</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">SQL&gt; select thread#, low_sequence#, high_sequence# <span class="keyword">from</span> v$archive_gap;</div><div class="line"></div><div class="line">   THREAD# LOW_SEQUENCE# HIGH_SEQUENCE#</div><div class="line">---------- ------------- --------------</div><div class="line">     <span class="number">2</span>        <span class="number">1648</span>       <span class="number">1662</span></div></pre></td></tr></table></figure>
</li>
<li><p>组装归档日志的拷贝语句<br>如果归档日志在ASM中，先通过rman将归档日志拷贝到OS，然后scp到备库standby归档目录；<br>如果归档日志在OS上，直接scp到备库standby归档目录即可。</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">-- 主库</div><div class="line">--生产rman用的日志拷贝命令</div><div class="line">select 'copy archivelog ''' <span class="string">|| NAME || ''' to ''/tmp/' || substr(name, 43,1)||'_'|| substr(name, 49,4) ||'_867683567.dbf'' ;'</span></div><div class="line">  from v$archived_log</div><div class="line"> where sequence<span class="meta"># &gt;= 1648</span></div><div class="line">   and sequence<span class="meta"># &lt;= 1662</span></div><div class="line">   and thread<span class="meta"># = 2</span></div><div class="line">   and dest_id = <span class="number">1</span>;  </div><div class="line"></div><div class="line">-- 把归档日志从ASM拷贝到OS上</div><div class="line">rman target /</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1648.52</span>2.<span class="number">91337825</span>3' to '/tmp/2_<span class="number">1648</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1649.52</span>3.<span class="number">91337831</span>5' to '/tmp/2_<span class="number">1649</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1650.52</span>4.<span class="number">91337836</span>1' to '/tmp/2_<span class="number">1650</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1651.52</span>6.<span class="number">91337839</span>1' to '/tmp/2_<span class="number">1651</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1652.52</span>7.<span class="number">91337842</span>7' to '/tmp/2_<span class="number">1652</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1653.52</span>8.<span class="number">91337846</span>5' to '/tmp/2_<span class="number">1653</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1654.53</span>0.<span class="number">91337851</span>7' to '/tmp/2_<span class="number">1654</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1655.53</span>1.<span class="number">91337858</span>5' to '/tmp/2_<span class="number">1655</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1656.53</span>2.<span class="number">91337867</span>5' to '/tmp/2_<span class="number">1656</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1657.53</span>5.<span class="number">91337917</span>7' to '/tmp/2_<span class="number">1657</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1658.53</span>6.<span class="number">91337930</span>5' to '/tmp/2_<span class="number">1658</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1659.53</span>7.<span class="number">91337942</span>3' to '/tmp/2_<span class="number">1659</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1660.53</span>9.<span class="number">91337958</span>3' to '/tmp/2_<span class="number">1660</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1661.54</span>1.<span class="number">91338116</span>3' to '/tmp/2_<span class="number">1661</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line">copy archivelog '+ARCH/masadb/archivelog/<span class="number">2016</span>_06_01/thread_2_seq_<span class="number">1662.54</span>2.<span class="number">91338128</span>1' to '/tmp/2_<span class="number">1662</span>_<span class="number">86768356</span>7.dbf' ;</div><div class="line"></div><div class="line">-- 在主库上执行，生成standby上需要的归档日志注册语句</div><div class="line">select 'ALTER DATABASE REGISTER PHYSICAL LOGFILE ''/tmp/' <span class="string">|| substr(name, 43,1)||'_'|| substr(name, 49,4) ||'_867683567.dbf'';'</span></div><div class="line">  from v$archived_log</div><div class="line"> where sequence<span class="meta"># &gt;= 1648</span></div><div class="line">   and sequence<span class="meta"># &lt;= 1662</span></div><div class="line">   and thread<span class="meta"># = 2</span></div><div class="line">   and dest_id = <span class="number">1</span>;</div><div class="line"></div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1648</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1649</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1650</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1651</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1652</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1653</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1654</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1655</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1656</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1657</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1658</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1659</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1660</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1661</span>_<span class="number">86768356</span>7.dbf';</div><div class="line">ALTER DATABASE REGISTER PHYSICAL LOGFILE '/tmp/2_<span class="number">1662</span>_<span class="number">86768356</span>7.dbf';</div></pre></td></tr></table></figure>
</li>
<li><p>拷贝归档日志到远程DG上</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">-- 网络环境理想，文件不大的话用scp</div><div class="line"><span class="variable">$ </span>scp <span class="number">2_16</span>* oracle<span class="variable">@10</span>.<span class="number">1.1</span>.<span class="number">10</span><span class="symbol">:/tmp</span></div><div class="line"></div><div class="line">-- 网络环境差，经常会断线的话，可以使用rsync（支持断点续传）</div><div class="line">-- 自定义脚本</div><div class="line">[oracle<span class="variable">@DB_DG_BS</span> ~]<span class="variable">$ </span>cat rsync_cp.sh </div><div class="line"><span class="comment">#!/bin/bash</span></div><div class="line"><span class="comment"># rsync_cp.sh</span></div><div class="line"></div><div class="line">export RSYNC_RSH=<span class="string">"ssh -o ServerAliveInterval=15 -o ServerAliveCountMax=2"</span></div><div class="line">rsyncSrcFile=<span class="variable">$1</span></div><div class="line">rsyncDestFile=<span class="variable">$2</span></div><div class="line">rsyncSuccess=-<span class="number">1</span></div><div class="line"><span class="keyword">while</span> [ <span class="variable">$rsyncSuccess</span> -ne <span class="number">0</span> ]</div><div class="line"><span class="keyword">do</span></div><div class="line"> rsync -v -P --partial --inplace <span class="variable">$rsyncSrcFile</span> <span class="variable">$rsyncDestFile</span></div><div class="line"> rsyncSuccess=<span class="variable">$?</span></div><div class="line">done</div><div class="line"></div><div class="line">-- 调用脚本</div><div class="line"><span class="variable">$.</span>/rsync_cp.sh oracle<span class="variable">@10</span>.<span class="number">11.60</span>.<span class="number">15</span><span class="symbol">:/tmp/</span><span class="number">2_1648_867683567</span>.dbf /data/arch/masadb/</div></pre></td></tr></table></figure>
</li>
<li><p>备库上执行前面生成的归档日志注册语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1648_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1649_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1650_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1651_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1652_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1653_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1654_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1655_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1656_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1657_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1658_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1659_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1660_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1661_867683567.dbf'</span>;</div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">REGISTER</span> <span class="keyword">PHYSICAL</span> <span class="keyword">LOGFILE</span> <span class="string">'/tmp/2_1662_867683567.dbf'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>如果备库打开实时应用，则会自动应用归档文件。若未打开，则在备库上使用下面命令：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="keyword">RECOVER</span> <span class="keyword">MANAGED</span> <span class="keyword">STANDBY</span> <span class="keyword">DATABASE</span> <span class="keyword">USING</span> <span class="keyword">CURRENT</span> <span class="keyword">LOGFILE</span> <span class="keyword">DISCONNECT</span> <span class="keyword">FROM</span> <span class="keyword">SESSION</span>;</div></pre></td></tr></table></figure>
</li>
<li><p>查看实时应用情况</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 通过视图</span></div><div class="line"><span class="keyword">set</span> linesize <span class="number">200</span></div><div class="line"><span class="keyword">col</span> <span class="keyword">name</span> <span class="keyword">for</span> a70</div><div class="line"><span class="keyword">alter</span> <span class="keyword">session</span> <span class="keyword">set</span> nls_date_format=<span class="string">'yyyy-mm-dd hh24:mi:ss'</span>;</div><div class="line"><span class="keyword">select</span>  <span class="keyword">NAME</span>,<span class="keyword">THREAD</span>#,FIRST_TIME,<span class="keyword">sequence</span>#,applied <span class="keyword">from</span> v$archived_log <span class="keyword">order</span> <span class="keyword">by</span>  FIRST_TIME,<span class="keyword">THREAD</span>#,<span class="keyword">sequence</span>#,DEST_ID;</div><div class="line"></div><div class="line"><span class="comment">-- 通过alert.log，出现下面类似的语句说明归档日志已经应用了</span></div><div class="line">$ tail -f alertxxx.log</div><div class="line">...</div><div class="line">Sun Jun 05 06:01:16 2016</div><div class="line">Media Recovery Log /data/arch/masadb/2_1648_867683567.dbf</div><div class="line">...</div></pre></td></tr></table></figure>
</li>
<li><p>检查视图或者观察alert.log，是否还有GAP存在，有的话重复上面的步骤直到全部处理GAP。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">-- 视图</div><div class="line">SQL&gt; select * <span class="keyword">from</span> v<span class="variable">$archive_gap</span>;</div><div class="line"></div><div class="line">-- alert日志</div><div class="line"><span class="built_in">..</span>.</div><div class="line">FAL[client]: Failed <span class="keyword">to</span> request gap sequence</div><div class="line"> GAP - thread 2 sequence 1674-1675</div><div class="line"> DBID 1666528406 branch 867683567</div><div class="line"><span class="built_in">..</span><span class="built_in">..</span></div></pre></td></tr></table></figure>
</li>
<li><p>在主库上开启远程备库传输参数</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">SQL&gt; alter<span class="built_in"> system </span><span class="builtin-name">set</span> <span class="attribute">log_archive_dest_state_3</span>=<span class="string">'enable'</span> <span class="attribute">sid</span>=<span class="string">'*'</span>;</div><div class="line">SQL&gt; show parameter log_archive_dest_state_3;</div><div class="line"></div><div class="line">NAME                                <span class="built_in"> TYPE </span>       VALUE</div><div class="line">------------------------------------ ----------- ------------------------------</div><div class="line">log_archive_dest_state_3             string      enable</div></pre></td></tr></table></figure>
</li>
<li><p>在主库上，删除多余的拷贝</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cd /tmp</div><div class="line">rm thread_*</div><div class="line"></div><div class="line"><span class="meta">RMAN&gt;</span><span class="bash"> crosscheck archivelog all;</span></div><div class="line"><span class="meta">RMAN&gt;</span><span class="bash"> list archivelog all;</span></div><div class="line"><span class="meta">RMAN&gt;</span><span class="bash"> delete expired archivelog all;</span></div></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;##故障现象&lt;br&gt;远程机房Dataguard告警系统报警出现GAP，登陆备库查看相关视图和日志&lt;/p&gt;
    
    </summary>
    
    
      <category term="dataguard" scheme="http://yoursite.com/tags/dataguard/"/>
    
  </entry>
  
  <entry>
    <title>ClickHouse安装</title>
    <link href="http://yoursite.com/2017/08/12/clickhouse-1/"/>
    <id>http://yoursite.com/2017/08/12/clickhouse-1/</id>
    <published>2017-08-12T13:06:30.000Z</published>
    <updated>2017-08-14T13:01:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>目前ClickHouse对ubuntu系统支持比较友好，对于centos就差一点。Ubuntu有deb包可以直接安装。对于centos的则需要自己编译。</p>
<a id="more"></a>
<h2 id="一、安装准备"><a href="#一、安装准备" class="headerlink" title="一、安装准备"></a>一、安装准备</h2><h3 id="1-升级gcc"><a href="#1-升级gcc" class="headerlink" title="1. 升级gcc"></a>1. 升级gcc</h3><p>编译ClickHouse需要gcc 6.0以上版本，这里安装6.2.0版本。具体步骤记录如下：</p>
<h4 id="1-1-下载-gcc-6-2-0-源码包-并解压"><a href="#1-1-下载-gcc-6-2-0-源码包-并解压" class="headerlink" title="1.1 下载 gcc-6.2.0 源码包, 并解压"></a>1.1 下载 gcc-6.2.0 源码包, 并解压</h4><pre><code>[root@node1 software]# wget http://ftp.gnu.org/gnu/gcc/gcc-6.2.0/gcc-6.2.0.tar.bz2
[root@node1 software]# tar -jvxf gcc-6.2.0.tar.bz2
[root@node1 software]# cd gcc-6.2.0/
[root@node1 contrib]# vim contrib/download_prerequisites
从 contrib/download_prerequisites 文件内查看需要的依赖包
</code></pre><h4 id="1-2-下载依赖包"><a href="#1-2-下载依赖包" class="headerlink" title="1.2 下载依赖包"></a>1.2 下载依赖包</h4><pre><code>[root@node1 software]# wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-2.4.2.tar.bz2 [root@node1 software]# wget ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-4.3.2.tar.bz2
[root@node1 software]# wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-0.8.1.tar.gz
</code></pre><h4 id="1-3-安装gmp"><a href="#1-3-安装gmp" class="headerlink" title="1.3 安装gmp"></a>1.3 安装gmp</h4><pre><code>[root@node1 software]# bzip2 -d gmp-4.3.2.tar.bz2
[root@node1 software]# tar xvf gmp-4.3.2.tar
[root@node1 software]# cd gmp-4.3.2/
[root@node1 gmp-4.3.2]# ./configure --prefix=/opt/gcc-6.2.0
[root@node1 gmp-4.3.2]# make &amp;&amp; make install
</code></pre><h4 id="1-4-安装mpfr"><a href="#1-4-安装mpfr" class="headerlink" title="1.4 安装mpfr"></a>1.4 安装mpfr</h4><pre><code>[root@node1 gmp-4.3.2]# cd ..
[root@node1 software]# bzip2 -d mpfr-2.4.2.tar.bz2
[root@node1 software]# tar xvf mpfr-2.4.2.tar
[root@node1 software]# cd mpfr-2.4.2/
[root@node1 mpfr-2.4.2]# ./configure --prefix=/opt/gcc-6.2.0 --with-gmp=/opt/gcc-6.2.0
[root@node1 mpfr-2.4.2]# make -j
[root@node1 mpfr-2.4.2]# make install
</code></pre><h4 id="1-5-安装mpc"><a href="#1-5-安装mpc" class="headerlink" title="1.5 安装mpc"></a>1.5 安装mpc</h4><pre><code>[root@node1 mpfr-2.4.2]# cd ..
[root@node1 software]# tar xvf mpc-0.8.1.tar.gz
[root@node1 software]# cd mpc-0.8.1/
[root@node1 mpc-0.8.1]# ./configure --prefix=/opt/gcc-6.2.0 --with-gmp=/opt/gcc-6.2.0 --with-mpfr=/opt/gcc-6.2.0
[root@node1 mpc-0.8.1]# make -j
[root@node1 mpc-0.8.1]# make install
</code></pre><h4 id="1-6-安装gcc"><a href="#1-6-安装gcc" class="headerlink" title="1.6 安装gcc"></a>1.6 安装gcc</h4><pre><code>[root@node1 mpc-0.8.1]# cd ..
[root@node1 software]# cd gcc-6.2.0/
[root@node1 gcc-6.2.0]# mkdir build
[root@node1 gcc-6.2.0]# cd build/
[root@node1 build]# ../configure --prefix=/opt/gcc-6.2.0 --with-gmp=/opt/gcc-6.2.0 --with-mpfr=/opt/gcc-6.2.0 --with-mpc=/opt/gcc-6.2.0 -enable-checking=release -enable-languages=c,c++ -disable-multilib
[root@node1 build]# make
[root@node1 build]# make install
</code></pre><p><strong>注意：</strong><br>编译过程中可能会出现类似下面的错误：</p>
<pre><code>checking for suffix of object files... configure: error: cannot compute suffix of object files: cannot compile

See `config.log&apos; for more details.

make[2]: *** [configure-stage1-target-libgcc] Error 1
</code></pre><p>解决方法：<br>将gmp,mpfr,mpc的lib库添加到下面的配置文件中</p>
<pre><code>vi /etc/ld.so.conf
include ld.so.conf.d/*.conf
/usr/local/lib
/opt/gcc-6.2.0/lib   #gmp,mpfr,mpc的lib库安装位置
/usr/lib64

添加保存后记得更新动态库的缓存：
# ldconfig -v
更新后再去重新编译安装。
</code></pre><h4 id="1-7-设置环境变量"><a href="#1-7-设置环境变量" class="headerlink" title="1.7 设置环境变量"></a>1.7 设置环境变量</h4><pre><code>[root@node1 software]# export PATH=/opt/gcc-6.2.0/bin:$PATH
[root@node1 software]# export LD_LIBRARY_PATH=/opt/gcc-6.2.0/lib:$LD_LIBRARY_PATH
</code></pre><h4 id="1-8-查看gcc版本"><a href="#1-8-查看gcc版本" class="headerlink" title="1.8 查看gcc版本"></a>1.8 查看gcc版本</h4><pre><code>[root@node1 ~]# gcc -v
</code></pre><h4 id="1-9-创建软链和环境变量"><a href="#1-9-创建软链和环境变量" class="headerlink" title="1.9 创建软链和环境变量"></a>1.9 创建软链和环境变量</h4><pre><code>[root@node1 ~]# ln -s /usr/local/bin/gcc /usr/local/bin/gcc-6
[root@node1 ~]# ln -s /usr/local/bin/g++ /usr/local/bin/g++-6
[root@node1 ~]# ln -s /usr/local/bin/gcc /usr/local/bin/cc
[root@node1 ~]# ln -s /usr/local/bin/g++ /usr/local/bin/c++
[root@node1 ~]# export CC=gcc-6
[root@node1 ~]# export CXX=g++-6
</code></pre><h3 id="2-安装其他库依赖包"><a href="#2-安装其他库依赖包" class="headerlink" title="2. 安装其他库依赖包"></a>2. 安装其他库依赖包</h3><pre><code>[root@node1 ~]# yum install libicu-devel readline-devel openssl-devel mysql-community-devel unixODBC-devel libtool-ltdl-devel
</code></pre><h2 id="二、安装ClickHouse"><a href="#二、安装ClickHouse" class="headerlink" title="二、安装ClickHouse"></a>二、安装ClickHouse</h2><h3 id="1-下载源码"><a href="#1-下载源码" class="headerlink" title="1. 下载源码"></a>1. 下载源码</h3><pre><code>[root@node1 software]# git clone -b stable https://github.com/yandex/ClickHouse.git
[root@node1 software]# cd ClickHouse
</code></pre><h3 id="2-编译源码"><a href="#2-编译源码" class="headerlink" title="2. 编译源码"></a>2. 编译源码</h3><pre><code>mkdir build
cd build
cmake ..
make -j $THREADS
make install
</code></pre><p><strong>注意：</strong></p>
<blockquote>
<p>在编译过程中发现对内存的消耗比较大，本人虚机开始配置1G内存，编译时经常莫名的中断报错，后查/var/log/message发现出现OOM情况，后把内存加大到4G，能够正常完成编译</p>
</blockquote>
<h2 id="三、简单使用"><a href="#三、简单使用" class="headerlink" title="三、简单使用"></a>三、简单使用</h2><h3 id="1-启动clickhouse"><a href="#1-启动clickhouse" class="headerlink" title="1. 启动clickhouse"></a>1. 启动clickhouse</h3><pre><code>[root@node1 ~]# /usr/local/bin/clickhouse-server --config-file=/usr/local/etc/clickhouse-server/config.xml &amp;
</code></pre><h3 id="2-登录测试"><a href="#2-登录测试" class="headerlink" title="2. 登录测试"></a>2. 登录测试</h3><pre><code>[root@node1 ~]# clickhouse-client
ClickHouse client version 1.1.54245.
Connecting to localhost:9000.
Connected to ClickHouse server version 1.1.54245.

:) select 1;

SELECT 1

┌─1─┐
│ 1 │
└───┘

1 rows in set. Elapsed: 0.002 sec.

:) select now();

SELECT now()

┌───────────────now()─┐
│ 2017-08-09 23:27:30 │
└─────────────────────┘

1 rows in set. Elapsed: 0.001 sec.

:)
</code></pre><h3 id="3-客户端使用"><a href="#3-客户端使用" class="headerlink" title="3. 客户端使用"></a>3. 客户端使用</h3><h4 id="3-1-交互模式"><a href="#3-1-交互模式" class="headerlink" title="3.1 交互模式"></a>3.1 交互模式</h4><pre><code>clickhouse-client
clickhouse-client --host=... --port=... --user=... --password=...
</code></pre><h4 id="3-2-启动多行查询"><a href="#3-2-启动多行查询" class="headerlink" title="3.2 启动多行查询"></a>3.2 启动多行查询</h4><pre><code>clickhouse-client -m
</code></pre><p>对于使用多行建表语句进行建表的时候就需要启用多行查询，否则会报错</p>
<h4 id="3-3-以批处理方式运行查询"><a href="#3-3-以批处理方式运行查询" class="headerlink" title="3.3 以批处理方式运行查询"></a>3.3 以批处理方式运行查询</h4><pre><code>clickhouse-client --query=&apos;SELECT 1&apos;
echo &apos;SELECT 1&apos; | clickhouse-client
</code></pre><h4 id="3-4-从指定格式的文件插入数据"><a href="#3-4-从指定格式的文件插入数据" class="headerlink" title="3.4 从指定格式的文件插入数据"></a>3.4 从指定格式的文件插入数据</h4><pre><code>clickhouse-client --query=&apos;INSERT INTO table VALUES&apos; &lt; data.txt
clickhouse-client --query=&apos;INSERT INTO table FORMAT TabSeparated&apos; &lt; data.tsv
</code></pre><h2 id="四、参考资料"><a href="#四、参考资料" class="headerlink" title="四、参考资料"></a>四、参考资料</h2><ul>
<li><a href="https://www.percona.com/blog/2017/03/17/column-store-database-benchmarks-mariadb-columnstore-vs-clickhouse-vs-apache-spark/" target="_blank" rel="external">Column Store Database Benchmarks: MariaDB ColumnStore vs. Clickhouse vs. Apache Spark</a></li>
<li><a href="https://www.percona.com/blog/2017/02/13/clickhouse-new-opensource-columnar-database/" target="_blank" rel="external">ClickHouse: New Open Source Columnar Database</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/22165241" target="_blank" rel="external">彪悍开源的分析数据库-ClickHouse</a></li>
<li><a href="https://clickhouse.yandex/docs/en/development/build.html" target="_blank" rel="external">How to build ClickHouse on Linux</a></li>
<li><a href="http://www.cnblogs.com/gomysql/p/6651513.html" target="_blank" rel="external">ClickHouse之初步认识</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;目前ClickHouse对ubuntu系统支持比较友好，对于centos就差一点。Ubuntu有deb包可以直接安装。对于centos的则需要自己编译。&lt;/p&gt;
    
    </summary>
    
    
      <category term="clickhouse" scheme="http://yoursite.com/tags/clickhouse/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2017/08/12/hello-world/"/>
    <id>http://yoursite.com/2017/08/12/hello-world/</id>
    <published>2017-08-12T07:41:49.000Z</published>
    <updated>2017-08-12T07:41:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
